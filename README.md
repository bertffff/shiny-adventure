# Marzban VPN Server Installer

–ú–æ–¥—É–ª—å–Ω—ã–π Bash-—Å–∫—Ä–∏–ø—Ç –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ VPN-—Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –±–∞–∑–µ –ø–∞–Ω–µ–ª–∏ **Marzban** —Å —è–¥—Ä–æ–º **Xray**.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üõ°Ô∏è **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ü–∞—Ç—Ç–µ—Ä–Ω Try/Catch —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ—Ç–∫–∞—Ç–æ–º –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- üì¶ **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- üîê **Reality Protocol**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π X25519
- üåê **WARP Integration**: –ù–∞—Ç–∏–≤–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Cloudflare WARP
- üõ°Ô∏è **AdGuard Home**: DNS-—Ä–µ–∑–æ–ª–≤–µ—Ä —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π —Ä–µ–∫–ª–∞–º—ã
- üî• **UFW**: –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ SSH-–ø–æ—Ä—Ç–∞ –ø–µ—Ä–µ–¥ –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π —Ñ–∞–π—Ä–≤–æ–ª–∞
- üìú **SSL**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ Let's Encrypt
- ‚úÖ **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫
- üìä **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤, –æ—Ç–ª–∞–¥–æ—á–Ω—ã–π —Ä–µ–∂–∏–º

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Ubuntu 22.04 LTS (–∏–ª–∏ Debian 11+)
- Root-–¥–æ—Å—Ç—É–ø
- –ú–∏–Ω–∏–º—É–º 1GB RAM (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 2GB)
- –ú–∏–Ω–∏–º—É–º 10GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ (–¥–ª—è Docker images)
- –î–æ–º–µ–Ω, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –Ω–∞ IP —Å–µ—Ä–≤–µ—Ä–∞

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
marzban-installer/
‚îú‚îÄ‚îÄ install.sh              # –ì–ª–∞–≤–Ω—ã–π —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫
‚îú‚îÄ‚îÄ uninstall.sh            # –°–∫—Ä–∏–ø—Ç —É–¥–∞–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ config.env.example      # –®–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ README.md               # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ modules/
    ‚îú‚îÄ‚îÄ core.sh             # –Ø–¥—Ä–æ: –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, rollback, —É—Ç–∏–ª–∏—Ç—ã
    ‚îú‚îÄ‚îÄ docker.sh           # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
    ‚îú‚îÄ‚îÄ firewall.sh         # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ UFW
    ‚îú‚îÄ‚îÄ ssl.sh              # SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (Let's Encrypt)
    ‚îú‚îÄ‚îÄ reality.sh          # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π Reality
    ‚îú‚îÄ‚îÄ warp.sh             # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Cloudflare WARP
    ‚îú‚îÄ‚îÄ adguard.sh          # AdGuard Home DNS
    ‚îú‚îÄ‚îÄ marzban.sh          # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Marzban
    ‚îî‚îÄ‚îÄ marzban_api.sh      # API –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ inbounds
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ DNS

**–í–ê–ñ–ù–û**: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ DNS **–î–û** –∑–∞–ø—É—Å–∫–∞ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞!

```bash
# –°–æ–∑–¥–∞–π—Ç–µ A-–∑–∞–ø–∏—Å—å:
# panel.example.com -> YOUR_SERVER_IP

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS:
dig panel.example.com
# –∏–ª–∏
nslookup panel.example.com
```

### 2. –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

```bash
# –°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä
cd /root
git clone https://github.com/your-repo/marzban-installer.git
cd marzban-installer
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
cp config.env.example config.env
nano config.env
```

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ** –ø–æ–ª—è:
- `PANEL_DOMAIN` - –¥–æ–º–µ–Ω –¥–ª—è –ø–∞–Ω–µ–ª–∏ Marzban
- `SUB_DOMAIN` - –¥–æ–º–µ–Ω –¥–ª—è –ø–æ–¥–ø–∏—Å–æ–∫ (–º–æ–∂–µ—Ç —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å PANEL_DOMAIN)
- `SSL_EMAIL` - email –¥–ª—è Let's Encrypt

### 4. –ó–∞–ø—É—Å–∫ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
chmod +x install.sh
sudo ./install.sh
```

–î–ª—è –æ—Ç–ª–∞–¥–æ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞:
```bash
sudo ./install.sh --debug
```

## –ü—Ä–æ—Ñ–∏–ª–∏ VPN

### –ü—Ä–æ—Ñ–∏–ª—å 1: "Whitelist Bypass"
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –î–æ—Å—Ç—É–ø –∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Ä–µ—Å—É—Ä—Å–∞–º —á–µ—Ä–µ–∑ –±–µ–ª—ã–π —Å–ø–∏—Å–æ–∫
- **–ü–æ—Ä—Ç**: 443 (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤)
- **SNI**: www.vk.com (–º–∞—Å–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–¥ –í–ö)
- **–ü—Ä–æ—Ç–æ–∫–æ–ª**: VLESS + TCP + TLS + Reality + Vision
- **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è**: Direct

### –ü—Ä–æ—Ñ–∏–ª—å 2: "Standard Fast"
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ë—ã—Å—Ç—Ä–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–ª—è –æ–±—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **–ü–æ—Ä—Ç**: 8444
- **SNI**: www.microsoft.com
- **–ü—Ä–æ—Ç–æ–∫–æ–ª**: VLESS + TCP + TLS + Reality + Vision
- **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è**: Direct

### –ü—Ä–æ—Ñ–∏–ª—å 3: "Via WARP"
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–±—Ö–æ–¥ –≥–µ–æ–±–ª–æ–∫–æ–≤ (Netflix, Spotify –∏ —Ç.–¥.)
- **–ü–æ—Ä—Ç**: 2053
- **SNI**: dl.google.com
- **–ü—Ä–æ—Ç–æ–∫–æ–ª**: VLESS + TCP + TLS + Reality + Vision
- **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è**: –ß–µ—Ä–µ–∑ Cloudflare WARP

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### config.env

```bash
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
PANEL_DOMAIN="panel.example.com"
SUB_DOMAIN="sub.example.com"
SSL_EMAIL="admin@example.com"

# –£—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–ø—É—Å—Ç—ã–µ = –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è)
MARZBAN_ADMIN_USER="admin"
MARZBAN_ADMIN_PASS=""
ADGUARD_USER="admin"
ADGUARD_PASS=""

# –ü–æ—Ä—Ç—ã
MARZBAN_PORT="8443"
ADGUARD_WEB_PORT="3000"

# –ü—Ä–æ—Ñ–∏–ª–∏ VPN
PROFILE1_PORT="443"
PROFILE1_SNI="www.vk.com"
PROFILE2_PORT="8444"
PROFILE2_SNI="www.microsoft.com"
PROFILE3_PORT="2053"
PROFILE3_SNI="dl.google.com"
```

## –§–∞–π–ª—ã –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```
/opt/marzban/
‚îú‚îÄ‚îÄ .env                        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Marzban
‚îú‚îÄ‚îÄ docker-compose.yml          # Docker Compose
‚îú‚îÄ‚îÄ admin_credentials.txt       # –£—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∞
‚îú‚îÄ‚îÄ installation_summary.txt    # –°–≤–æ–¥–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
‚îú‚îÄ‚îÄ ssl/                        # SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ panel.example.com.crt
‚îÇ   ‚îî‚îÄ‚îÄ panel.example.com.key
‚îú‚îÄ‚îÄ keys/
‚îÇ   ‚îî‚îÄ‚îÄ reality_keys.env        # –ö–ª—é—á–∏ Reality
‚îú‚îÄ‚îÄ warp/
‚îÇ   ‚îú‚îÄ‚îÄ warp.conf               # –ö–æ–Ω—Ñ–∏–≥ WireGuard
‚îÇ   ‚îî‚îÄ‚îÄ warp_outbound.json      # Outbound –¥–ª—è Xray
‚îú‚îÄ‚îÄ adguard/
‚îÇ   ‚îú‚îÄ‚îÄ conf/
‚îÇ   ‚îî‚îÄ‚îÄ work/
‚îú‚îÄ‚îÄ logs/
‚îî‚îÄ‚îÄ xray_config.json            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Xray

/var/lib/marzban/               # Runtime –¥–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ db.sqlite3                  # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ xray_config.json            # –†–∞–±–æ—á–∏–π –∫–æ–Ω—Ñ–∏–≥ Xray
‚îî‚îÄ‚îÄ ssl/                        # SSL –¥–ª—è Marzban
```

## –°–∏—Å—Ç–µ–º–∞ –æ—Ç–∫–∞—Ç–∞ (Rollback)

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏ –≤–æ –≤—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –º–µ—Ö–∞–Ω–∏–∑–º –æ—Ç–∫–∞—Ç–∞:

1. **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è** (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ SSH/UFW)
2. **–û–±—ã—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è** (–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤)
3. **–û—á–∏—Å—Ç–∫–∞** (—É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤)

–≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–∏—Ç—É–∞—Ü–∏—é "–ø–æ–ª—É—Ä–∞–±–æ—á–µ–≥–æ" —Å–µ—Ä–≤–µ—Ä–∞ –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –¥–æ—Å—Ç—É–ø –ø–æ SSH.

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- ‚úÖ –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ SSH-–ø–æ—Ä—Ç–∞ –ø–µ—Ä–µ–¥ –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π UFW
- ‚úÖ –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è SSH-–ø—Ä–∞–≤–∏–ª –ø–µ—Ä–µ–¥ –≤–∫–ª—é—á–µ–Ω–∏–µ–º —Ñ–∞–π—Ä–≤–æ–ª–∞
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫—Ä–∏–ø—Ç–æ—Å—Ç–æ–π–∫–∏—Ö –ø–∞—Ä–æ–ª–µ–π
- ‚úÖ Bcrypt-—Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π —á–µ—Ä–µ–∑ stdin (–∑–∞—â–∏—Ç–∞ –æ—Ç injection)
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º (0600 –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è JSON –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º
- ‚úÖ –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –≤ JSON
- ‚úÖ Timeout –¥–ª—è –≤—Å–µ—Ö Docker –∏ —Å–µ—Ç–µ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### –ò–∑–±–µ–≥–∞–µ—Ç—Å—è:
- ‚ùå –ù–∏–∫–∞–∫–∏—Ö `chmod 777`
- ‚ùå –ù–∏–∫–∞–∫–æ–≥–æ –ø—Ä—è–º–æ–≥–æ –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π –≤ shell-–∫–æ–º–∞–Ω–¥—ã
- ‚ùå –ù–∏–∫–∞–∫–∏—Ö `docker stop $(docker ps -q)` (–æ–ø–∞—Å–Ω–æ!)

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞

```bash
cd /opt/marzban
docker compose ps
docker compose logs -f marzban
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫

```bash
cd /opt/marzban
docker compose restart
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
cd /opt/marzban
docker compose pull
docker compose up -d
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# Marzban
docker logs marzban --tail 100

# AdGuard
docker logs adguardhome --tail 100

# –õ–æ–≥ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
cat /var/log/marzban-installer.log
```

### –£–¥–∞–ª–µ–Ω–∏–µ

```bash
sudo ./uninstall.sh
```

## FAQ

### DNS –Ω–µ —Ä–µ–∑–æ–ª–≤–∏—Ç—Å—è / SSL –Ω–µ –≤—ã–¥–∞—ë—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS:
dig panel.example.com

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
# –ï—Å–ª–∏ –Ω–µ—Ç - –ø–æ–¥–æ–∂–¥–∏—Ç–µ 5-15 –º–∏–Ω—É—Ç –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DNS
```

### –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –∫–ª—é—á Reality –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞?

–ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –∏ Short ID —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤:
- `/opt/marzban/keys/reality_keys.env`
- `/opt/marzban/installation_summary.txt`

### –ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å SNI?

```bash
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥:
nano /var/lib/marzban/xray_config.json

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ:
cd /opt/marzban && docker compose restart marzban
```

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Marzban: `https://your-domain:8443/dashboard`

### WARP –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥:
cat /opt/marzban/warp/warp.conf

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ outbound:
cat /opt/marzban/warp/warp_outbound.json | jq .

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ WARP:
rm -rf /opt/marzban/warp
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –∑–∞–Ω–æ–≤–æ –∏–ª–∏ –≤—Ä—É—á–Ω—É—é:
source modules/warp.sh && setup_warp
```

### –ü–æ—Ä—Ç 53 –∑–∞–Ω—è—Ç systemd-resolved

–£—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª—é—á–∞–µ—Ç systemd-resolved. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –æ–±—Ä–∞—Ç–Ω–æ:

```bash
systemctl enable --now systemd-resolved
ln -sf /run/systemd/resolve/stub-resolv.conf /etc/resolv.conf
```

### –ù–µ –º–æ–≥—É –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –ø–æ SSH –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–£—Å—Ç–∞–Ω–æ–≤—â–∏–∫ **–≤—Å–µ–≥–¥–∞** –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç SSH-–ø–æ—Ä—Ç. –ï—Å–ª–∏ –≤—Å—ë –∂–µ –ø–æ—Ç–µ—Ä—è–ª–∏ –¥–æ—Å—Ç—É–ø:

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å VPS-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ:
```bash
ufw allow 22/tcp  # –∏–ª–∏ –≤–∞—à SSH-–ø–æ—Ä—Ç
ufw enable
```

## Troubleshooting

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```bash
# Docker
docker info
docker compose version

# –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker ps -a

# –ü–æ—Ä—Ç—ã
ss -tlnp

# UFW
ufw status verbose

# SSL
openssl x509 -in /opt/marzban/ssl/panel.example.com.crt -text -noout | head -20
```

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å—ë
cd /opt/marzban && docker compose down && docker compose up -d

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å Xray –∫–æ–Ω—Ñ–∏–≥
cat /opt/marzban/xray_config.json

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Xray –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker exec marzban cat /var/lib/marzban/logs/error.log

# –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ø–æ—Ä—Ç—É
nc -zv YOUR_IP 443
```

## –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ:
- **Windows**: v2rayN, Nekoray
- **macOS**: V2rayU, Nekoray
- **Android**: v2rayNG, Nekobox
- **iOS**: Shadowrocket, Streisand

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞:
1. –í Marzban —Å–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Å—ã–ª–∫—É –ø–æ–¥–ø–∏—Å–∫–∏ –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥
3. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –≤ –∫–ª–∏–µ–Ω—Ç
4. –ü–æ–¥–∫–ª—é—á–∞–π—Ç–µ—Å—å!

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- [Marzban](https://github.com/Gozargah/Marzban)
- [Xray-core](https://github.com/XTLS/Xray-core)
- [AdGuard Home](https://github.com/AdguardTeam/AdGuardHome)
- [wgcf](https://github.com/ViRb3/wgcf)
